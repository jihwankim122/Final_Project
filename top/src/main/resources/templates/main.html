<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout1}">

<!-- ì‚¬ìš©ì CSS ì¶”ê°€ -->
<th:block layout:fragment="css">
  <style>
    .carousel-inner > .item {
        height: 350px;
    }
    .margin {
        margin-bottom: 30px;
    }
    .banner {
        height: 300px;
        position: absolute; top: 0; left: 0;
        width: 100%;
        height: 100%;
    }
    .card-text {
        text-overflow: ellipsis;
        white-space: nowrap;
        overflow: hidden;
    }
    a:hover {
        text-decoration: none;
    }
    .center {
        text-align: center;
    }


    /* ì±—ë´‡ ì•„ì´ì½˜ ìŠ¤íƒ€ì¼ */
    .chatbot-icon {
        position: fixed;
        bottom: 30px;
        right: 30px; /* ì•„ì´ì½˜ì„ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™ */
        font-size: 40px; /* ì•„ì´ì½˜ í¬ê¸° ì¦ê°€ */
        cursor: pointer; /* ì»¤ì„œ í¬ì¸í„° ì¶”ê°€ */
        background-color: #007bff; /* ë°°ê²½ ìƒ‰ ì¶”ê°€ */
        color: white; /* ì•„ì´ì½˜ ìƒ‰ìƒ */
        border-radius: 50%; /* ì›í˜• */
        padding: 10px; /* ì—¬ë°± ì¶”ê°€ */
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); /* ê·¸ë¦¼ì ì¶”ê°€ */
        transition: background-color 0.3s; /* ë°°ê²½ ìƒ‰ìƒ ì „í™˜ íš¨ê³¼ */
    }

    .chatbot-icon:hover {
        background-color: #0056b3; /* í˜¸ë²„ ì‹œ ìƒ‰ìƒ ë³€ê²½ */
    }

    /* ì±—ë´‡ ìŠ¤íƒ€ì¼ */
    .chatbot-container {
        display: none; /* ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
        position: fixed;
        bottom: 30px; /* ìœ„ì¹˜ ì¡°ì • */
        right: 30px;
        width: 300px; /* ë„ˆë¹„ ì¡°ì • */
        height: 400px; /* ë†’ì´ ëŠ˜ë¦¬ê¸° */
        background-color: #ffffff; /* ë°°ê²½ìƒ‰ */
        border: 1px solid #ccc; /* í…Œë‘ë¦¬ */
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* ê·¸ë¦¼ì */
        border-radius: 8px; /* ëª¨ì„œë¦¬ ë‘¥ê¸€ê²Œ */
        overflow: hidden; /* ë‚´ìš©ì´ ë„˜ì¹˜ì§€ ì•Šë„ë¡ ìˆ¨ê¹€ */
    }

    .chatbot-header {
        background-color: #007bff; /* ì±—ë´‡ í—¤ë” ìƒ‰ìƒ */
        color: white; /* ê¸€ì ìƒ‰ìƒ */
        padding: 10px; /* ì—¬ë°± */
        text-align: center; /* ê°€ìš´ë° ì •ë ¬ */
        border-radius: 8px 8px 0 0; /* ëª¨ì„œë¦¬ ë‘¥ê¸€ê²Œ */
    }

    .chatbot-body {
        padding: 10px; /* ì—¬ë°± */
        font-size: 16px; /* ê¸€ì”¨ í¬ê¸° ëŠ˜ë¦¬ê¸° */
        line-height: 1.6; /* ì¤„ ê°„ê²© ëŠ˜ë¦¬ê¸° */
        height: calc(100% - 95px); /* ì…ë ¥ì°½ í¬ê¸°ë¥¼ ê³ ë ¤í•œ ë†’ì´ */
        overflow-y: auto; /* ìˆ˜ì§ ìŠ¤í¬ë¡¤ ê°€ëŠ¥ */
    }

    .chatbot-input {
        display: flex; /* ì…ë ¥ì°½ ì •ë ¬ */
        height: 50px;
        padding: 5px; /* ì—¬ë°± */
        border-top: 1px solid #ccc; /* ì…ë ¥ì°½ ìœ„ìª½ì— í…Œë‘ë¦¬ ì¶”ê°€ */
        background-color: #f9f9f9; /* ì…ë ¥ì°½ ë°°ê²½ìƒ‰ */
    }

    .chatbot-input input {
        flex-grow: 1; /* ì…ë ¥ì°½ í™•ì¥ */
        padding: 5px; /* ì—¬ë°± */
        border: 1px solid #ccc; /* í…Œë‘ë¦¬ */
        border-radius: 5px; /* ëª¨ì„œë¦¬ ë‘¥ê¸€ê²Œ */
        margin-right: 5px; /* ë²„íŠ¼ê³¼ì˜ ê°„ê²© */
    }

    .chatbot-input button {
        padding: 5px 10px; /* ë²„íŠ¼ ì—¬ë°± */
        border: none; /* í…Œë‘ë¦¬ ì œê±° */
        background-color: #007bff; /* ë²„íŠ¼ ë°°ê²½ìƒ‰ */
        color: white; /* ë²„íŠ¼ ê¸€ììƒ‰ */
        border-radius: 5px; /* ëª¨ì„œë¦¬ ë‘¥ê¸€ê²Œ */
        cursor: pointer; /* ì»¤ì„œ í¬ì¸í„° */
    }

    .chatbot-input button:hover {
        background-color: #0056b3; /* ë²„íŠ¼ í˜¸ë²„ ìƒ‰ìƒ */
    }

    .close-button {
        position: absolute;
        top: 5px;
        right: 5px;
        background-color: transparent;
        border: none;
        color: white;
        font-size: 20px;
        cursor: pointer;
    }

    .chatbot-message {
        background-color: #ffffff; /* ë°°ê²½ìƒ‰ */
        border-radius: 10px; /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
        padding: 15px; /* íŒ¨ë”© */
        margin: 10px 0; /* ë§ˆì§„ */
        font-size: 18px; /* í°íŠ¸ í¬ê¸° */
        line-height: 1.5; /* ì¤„ ê°„ê²© */
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1); /* ê·¸ë¦¼ì íš¨ê³¼ */
    }
    .chatbot-message h3 {
        margin: 0; /* ì œëª© ë§ˆì§„ ì œê±° */
        font-size: 20px; /* ì œëª© í°íŠ¸ í¬ê¸° */
        color: #007bff; /* ì œëª© ìƒ‰ìƒ */
    }
    .chatbot-message ul {
        padding-left: 20px; /* ë¦¬ìŠ¤íŠ¸ ì™¼ìª½ íŒ¨ë”© */
    }
  </style>
</th:block>

<!-- 1030 ì„±ì•„ ì±—ë´‡ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€ -->
<th:block layout:fragment="script">
  <script th:inline="javascript">
    // ì±—ë´‡ í† ê¸€ í•¨ìˆ˜
    function toggleChatbot() {
        const chatbot = document.getElementById('chatbot');
        const chatbotBody = document.getElementById('chatbotBody');

        // ì±—ë´‡ì´ ì—´ë¦¬ë©´ í™˜ì˜ ë©”ì‹œì§€ë¥¼ ì¶”ê°€
        if (chatbot.style.display === 'none' || chatbot.style.display === '') {
            chatbot.style.display = 'block';
            // ì´ˆê¸° ë©”ì‹œì§€ ì¶”ê°€
            chatbotBody.innerHTML = "<div><strong>ì•ˆë…•í•˜ì„¸ìš”! ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?</strong><br>" +
                                    "1. êµ¬ë§¤ë‚´ì—­ ë³´ê¸° - 'êµ¬ë§¤ë‚´ì—­' ë˜ëŠ” 'ì£¼ë¬¸'ì„ ì…ë ¥í•˜ì„¸ìš”.<br>" +
                                    "2. ê³µì§€ì‚¬í•­ ë³´ê¸° - 'ê³µì§€ì‚¬í•­' ë˜ëŠ” 'ê³µì§€'ë¥¼ ì…ë ¥í•˜ì„¸ìš”.<br>" +
                                    "3. QnA ë³´ê¸° - 'QnA' ë˜ëŠ” 'ë¬¸ì˜'ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</div>";
        } else {
            chatbot.style.display = 'none';
        }

        // ìŠ¤í¬ë¡¤ì„ í•­ìƒ ì•„ë˜ë¡œ
        chatbotBody.scrollTop = chatbotBody.scrollHeight;
    }

    // ë©”ì‹œì§€ ì „ì†¡ í•¨ìˆ˜
    function sendMessage() {
        const userMessage = document.getElementById('userMessage').value.trim();
        const chatbotBody = document.getElementById('chatbotBody');
        let response = "";

        if (!userMessage) {
            // ì‚¬ìš©ìê°€ ì…ë ¥í•˜ì§€ ì•Šì•˜ì„ ë•Œ
            return; // ì•„ë¬´ ê²ƒë„ í•˜ì§€ ì•ŠìŒ
        } else if (userMessage.includes("êµ¬ë§¤ë‚´ì—­") || userMessage.includes("ì£¼ë¬¸")) {
            response = "êµ¬ë§¤ ë‚´ì—­ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤: <a href='/orders'>êµ¬ë§¤ë‚´ì—­ ë³´ê¸°</a>";
        } else if (userMessage.includes("ê³µì§€ì‚¬í•­") || userMessage.includes("ê³µì§€")) {
            response = "ê³µì§€ì‚¬í•­ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤: <a href='/notice/list'>ê³µì§€ì‚¬í•­ ë³´ê¸°</a>";
        } else if (userMessage.includes("QnA") || userMessage.includes("ë¬¸ì˜")) {
            response = "QnA í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤: <a href='/qna/list'>QnA ë³´ê¸°</a>";
        } else {
            response = "ì£„ì†¡í•©ë‹ˆë‹¤. í•´ë‹¹ ìš”ì²­ì— ëŒ€í•œ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. 'êµ¬ë§¤ë‚´ì—­', 'ê³µì§€ì‚¬í•­', 'QnA'ì™€ ê°™ì€ í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.";
        }

        chatbotBody.innerHTML += "<div>ì‚¬ìš©ì: " + userMessage + "</div>";
        chatbotBody.innerHTML += "<div>" + response + "</div>";
        document.getElementById('userMessage').value = ""; // ì…ë ¥ì°½ ë¹„ìš°ê¸°
        chatbotBody.scrollTop = chatbotBody.scrollHeight; // ìŠ¤í¬ë¡¤ ì•„ë˜ë¡œ ì´ë™
    }

    // ì±—ë´‡ ë‹«ê¸° í•¨ìˆ˜
    function closeChatbot() {
        const chatbot = document.getElementById('chatbot');
        chatbot.style.display = 'none'; // ì±—ë´‡ ìˆ¨ê¸°ê¸°
    }
  </script>
</th:block>

<div layout:fragment="content">

  <div id="carouselControls" class="carousel slide margin" data-ride="carousel">
    <div class="container-fluid">
      <div id="demo" class="carousel slide" data-bs-ride="carousel">
        <!-- í´ë¦­ ë²„íŠ¼ -->
        <div class="carousel-indicators">
          <button type="button" data-bs-target="#demo" data-bs-slide-to="0" class="active"></button>
          <button type="button" data-bs-target="#demo" data-bs-slide-to="1"></button>
          <button type="button" data-bs-target="#demo" data-bs-slide-to="2"></button>
        </div>
        <!-- ìºëŸ¬ì…€ ì´ë¯¸ì§€ -->
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img src="/img/img1.jpg" alt="img1">
          </div>
          <div class="carousel-item">
            <img src="/img/img2.jpg" alt="img2">
          </div>
          <div class="carousel-item">
            <img src="/img/img3.jpg" alt="img3">
          </div>
        </div>
        <!-- ì¢Œìš° ë²„íŠ¼ -->
        <button class="carousel-control-prev" type="button" data-bs-target="#demo" data-bs-slide="prev">
          <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#demo" data-bs-slide="next">
          <span class="carousel-control-next-icon"></span>
        </button>
      </div>
    </div>
  </div>

  <input type="hidden" name="searchQuery" th:value="${itemSearchDto.searchQuery}">
  <div th:if="${not #strings.isEmpty(itemSearchDto.searchQuery)}" class="center">
    <p class="h3 font-weight-bold" th:text="${itemSearchDto.searchQuery} + ' ê²€ìƒ‰ ê²°ê³¼'"></p>
  </div>

  <div class="row">
    <th:block th:each="item, status: ${items.getContent()}">
      <div class="col-md-4 margin">
        <div class="card">
          <a th:href="'/item/' + ${item.id}" class="text-dark">
            <img th:src="${item.imgUrl}" class="card-img-top" th:alt="${item.itemNm}" height="400">
            <div class="card-body">
              <h4 class="card-title">[[${item.itemNm}]]</h4>
              <p class="card-text">[[${item.itemDetail}]]</p>
              <h3 class="card-title text-danger">[[${item.price}]]ì›</h3>
            </div>
          </a>
        </div>
      </div>
    </th:block>
  </div>

<!-- 1030 ì„±ì•„ ì±—ë´‡ ì¶”ê°€ ------------------------------------------------------>
  <!-- ì±—ë´‡ ì•„ì´ì½˜ -->
  <div class="chatbot-icon" onclick="toggleChatbot()">ğŸ’¬</div>

  <!-- ì±—ë´‡ ì»¨í…Œì´ë„ˆ -->
  <div id="chatbot" class="chatbot-container">
    <button class="close-button" onclick="closeChatbot()">âœ–</button> <!-- X ë²„íŠ¼ ì¶”ê°€ -->
    <div class="chatbot-header">ì±—ë´‡</div>
    <div id="chatbotBody" class="chatbot-body"></div>
    <div class="chatbot-input">
      <input type="text" id="userMessage" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." />
      <button onclick="sendMessage()">ì „ì†¡</button>
    </div>
  </div>
  <!-- ì±—ë´‡ ë -->

</div>

</html>
